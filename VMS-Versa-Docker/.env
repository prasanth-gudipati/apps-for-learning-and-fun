# Environment Configuration for VMS Debug Tool Microservices

# ==============================================
# Global Configuration
# ==============================================

# Application Environment
FLASK_ENV=production
DEBUG=false
LOG_LEVEL=INFO

# Security
SECRET_KEY=change-this-to-a-secure-random-key-in-production
SESSION_TIMEOUT=3600

# ==============================================
# Redis Configuration (Session Storage)
# ==============================================
REDIS_HOST=session-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://session-redis:6379/0

# ==============================================
# Service URLs (Internal Docker Network)
# ==============================================
SSH_SERVICE_URL=http://ssh-service:8001
KUBECTL_SERVICE_URL=http://kubectl-service:8002
REDIS_SERVICE_URL=http://redis-service:8003
LOGS_SERVICE_URL=http://logs-service:8004

# ==============================================
# SSH Service Configuration
# ==============================================
SSH_TIMEOUT=30
SSH_MAX_CONNECTIONS=10
SSH_KEEPALIVE_INTERVAL=60
SSH_CONNECTION_RETRIES=3

# Default SSH credentials (can be overridden per connection)
DEFAULT_SSH_USER=admin
DEFAULT_SSH_PORT=22
SSH_KEY_PATH=/app/ssh_keys

# ==============================================
# Kubectl Service Configuration
# ==============================================
KUBECTL_TIMEOUT=60
KUBECTL_DEFAULT_NAMESPACE=default
KUBECTL_MAX_OUTPUT_SIZE=1048576
KUBECTL_CONFIG_PATH=/app/.kube/config

# ==============================================
# Redis Service Configuration
# ==============================================
REDIS_CLI_TIMEOUT=30
REDIS_MAX_KEY_SCAN=1000
REDIS_DEFAULT_DB=0

# ==============================================
# Logs Service Configuration
# ==============================================
LOG_SCAN_TIMEOUT=120
LOG_MAX_FILE_SIZE=104857600
LOG_TAIL_LINES=100
LOG_SEARCH_BUFFER_SIZE=8192

# ==============================================
# Web Frontend Configuration
# ==============================================
WEB_HOST=0.0.0.0
WEB_PORT=5000
SOCKETIO_ASYNC_MODE=threading
SOCKETIO_PING_TIMEOUT=60
SOCKETIO_PING_INTERVAL=25

# File upload settings
MAX_CONTENT_LENGTH=16777216
UPLOAD_FOLDER=/app/uploads

# ==============================================
# NGINX Configuration
# ==============================================
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_CLIENT_MAX_BODY_SIZE=50m
NGINX_PROXY_TIMEOUT=300s

# ==============================================
# Health Check Configuration
# ==============================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# ==============================================
# Development Settings (Override in .env.local)
# ==============================================
# FLASK_ENV=development
# DEBUG=true
# LOG_LEVEL=DEBUG
# REDIS_URL=redis://localhost:6379/0

# ==============================================
# Production Settings
# ==============================================

# Database persistence
REDIS_PERSISTENCE=yes
REDIS_SAVE_INTERVAL=900 1

# Security headers
SECURITY_HEADERS=true
CSRF_PROTECTION=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# SSL/TLS (when using HTTPS)
SSL_CERTIFICATE_PATH=/etc/ssl/certs/vms-debug-tool.crt
SSL_PRIVATE_KEY_PATH=/etc/ssl/private/vms-debug-tool.key
FORCE_HTTPS=false